<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>react 通用列表组件封装 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="场景 GitHub 源码  在后台项目中，即便使用了 antd，仍然存在太多太多的列表页面。这些列表页面大多数又是非常相似的，所以吾辈需要解决重复的简单列表的编写，避免每次都手动控制过滤器&#x2F;分页之类的东西，将之抽象成配置项，然后通过配置生成列表页面。或许已经有很多人做过了这件事情，但于吾辈而言，这仍然是全新的体验，所以也便于此记录，并供之以他人参考。 理念使用逐级递进的方式进行封装，使用者可以根据">
<meta property="og:type" content="article">
<meta property="og:title" content="react 通用列表组件封装">
<meta property="og:url" content="http://example.com/2020/12/30/9b07ff8ce6dd4eb08896f6b8191d7181/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="场景 GitHub 源码  在后台项目中，即便使用了 antd，仍然存在太多太多的列表页面。这些列表页面大多数又是非常相似的，所以吾辈需要解决重复的简单列表的编写，避免每次都手动控制过滤器&#x2F;分页之类的东西，将之抽象成配置项，然后通过配置生成列表页面。或许已经有很多人做过了这件事情，但于吾辈而言，这仍然是全新的体验，所以也便于此记录，并供之以他人参考。 理念使用逐级递进的方式进行封装，使用者可以根据">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2020-12-30T04:32:34.000Z">
<meta property="article:modified_time" content="2020-12-30T04:32:41.000Z">
<meta property="article:author" content="John Doe">
<meta property="article:tag" content="react">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-9b07ff8ce6dd4eb08896f6b8191d7181" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2020/12/30/9b07ff8ce6dd4eb08896f6b8191d7181/" class="article-date">
  <time class="dt-published" datetime="2020-12-30T04:32:34.000Z" itemprop="datePublished">2020-12-30</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      react 通用列表组件封装
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/rxliuli/example/tree/master/basic_list">GitHub 源码</a></p>
</blockquote>
<p>在后台项目中，即便使用了 antd，仍然存在太多太多的列表页面。这些列表页面大多数又是非常相似的，所以吾辈需要解决重复的简单列表的编写，避免每次都手动控制过滤器/分页之类的东西，将之抽象成配置项，然后通过配置生成列表页面。或许已经有很多人做过了这件事情，但于吾辈而言，这仍然是全新的体验，所以也便于此记录，并供之以他人参考。</p>
<h2 id="理念"><a href="#理念" class="headerlink" title="理念"></a>理念</h2><p>使用逐级递进的方式进行封装，使用者可以根据需求停留在一个合适的封装层次，使用不同封装层次的组件。</p>
<ul>
<li><code>BasicList</code>：高层列表封装组件<ul>
<li><code>ListHeader</code>：列表页顶部工具栏组件<ul>
<li><code>CommonHeader</code>: 通用的顶部工具栏组件</li>
</ul>
</li>
<li><code>ListFilter</code>：过滤器组件<ul>
<li><code>FilterSelect</code>：单选过滤器</li>
<li><code>FilterTimeRange</code>：时间区间过滤器</li>
<li><code>FilterSlot</code>：自定义过滤器</li>
</ul>
</li>
<li><code>ListTable</code>：列表封装组件</li>
</ul>
</li>
</ul>
<p>BasicList 使用步骤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">graph TD;</span><br><span class="line">A[添加 api class 实现 BasicListApi] --&gt; B[添加配置项]</span><br><span class="line">B --&gt; C&#123;是否需要动态修改&#125;;</span><br><span class="line">C --&gt; |是| C1[使用 useMemo 声明]</span><br><span class="line">C --&gt; |否| C2[将之抽离到组件外部声明为常量]</span><br><span class="line">C1 --&gt; D</span><br><span class="line">C2 --&gt; D</span><br><span class="line">D&#123;是否有非通用 Filter&#125;</span><br><span class="line">D --&gt; |是| D1[自定义 slot filter]</span><br><span class="line">D --&gt; |否| D2[使用 select&#x2F;time filter]</span><br><span class="line">D1 --&gt; E</span><br><span class="line">D2 --&gt; E</span><br><span class="line">E&#123;是否需要自定义表格相关功能&#125;</span><br><span class="line">E --&gt; |是| E1[使用 filterOperate 配置]</span><br><span class="line">E --&gt; |否| E2[不声明 filter 配置]</span><br><span class="line">E1 --&gt; F</span><br><span class="line">E2 --&gt; F</span><br><span class="line">F[列表渲染]</span><br></pre></td></tr></table></figure>
<p>BasicList 渲染流程</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">graph TB</span><br><span class="line">A[从 props 拿到配置项列表] --&gt; B&#123;header 是否为 ReactElement&#125;</span><br><span class="line">B --&gt; |是| B1[直接渲染]</span><br><span class="line">B --&gt; |否| B2[使用 ListHeader 渲染 header 配置项]</span><br><span class="line">B1 --&gt; C</span><br><span class="line">B2 --&gt; C</span><br><span class="line">C&#123;filters 是否存在&#125;</span><br><span class="line">C --&gt; |是| C1&#123;filters 是否为 ReactElement&#125;</span><br><span class="line">  C1 --&gt; |是| C1A[直接渲染]</span><br><span class="line">  C1 --&gt; |否| C1B[使用 ListFilter 渲染 filters 配置项] --&gt; C1C[监听 initialParams 变化, 以随时修改 form]</span><br><span class="line">C --&gt; |否| C2[不渲染]</span><br><span class="line">C1A --&gt; D</span><br><span class="line">C1B --&gt; D</span><br><span class="line">C2 --&gt; D</span><br><span class="line">D[渲染列表]</span><br></pre></td></tr></table></figure>
<h2 id="使用示例"><a href="#使用示例" class="headerlink" title="使用示例"></a>使用示例</h2><h3 id="使用基本-API"><a href="#使用基本-API" class="headerlink" title="使用基本 API"></a>使用基本 API</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/rxliuli/example/blob/master/basic_list/src/pages/example/BasicListExample.tsx">GitHub 代码示例</a></p>
</blockquote>
<p>如下所示，我们想要构造下面这样一个简单的列表页面，包含一个面包屑导航列表、搜索框、过滤条件选择器和一个表格。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line">import * as React from &quot;react&quot;;</span><br><span class="line">import &#123; Button &#125; from &quot;antd&quot;;</span><br><span class="line">import &#123; Link &#125; from &quot;react-router-dom&quot;;</span><br><span class="line">import &#123; Moment &#125; from &quot;moment&quot;;</span><br><span class="line">import &#123; LabeledValue &#125; from &quot;antd&#x2F;es&#x2F;select&quot;;</span><br><span class="line">import &#123; userApi &#125; from &quot;.&#x2F;api&#x2F;UserApi&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  BasicList,</span><br><span class="line">  BasicListPropsType,</span><br><span class="line">  FilterFieldTypeEnum,</span><br><span class="line">&#125; from &quot;..&#x2F;..&#x2F;components&#x2F;list&quot;;</span><br><span class="line"></span><br><span class="line">type PropsType &#x3D; &#123;&#125;;</span><br><span class="line"></span><br><span class="line">type Config &#x3D; Omit&lt;BasicListPropsType, &quot;params&quot;&gt; &amp; &#123;</span><br><span class="line">  params?: &#123;</span><br><span class="line">    keyword?: string;</span><br><span class="line">    test?: number;</span><br><span class="line">    birthdayTimeRange?: [Moment, Moment];</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;;</span><br><span class="line">const testOptionList: LabeledValue[] &#x3D; [</span><br><span class="line">  &#123; value: 0, label: &quot;测试 0&quot; &#125;,</span><br><span class="line">  &#123; value: 1, label: &quot;测试 1&quot; &#125;,</span><br><span class="line">  &#123; value: 2, label: &quot;测试 2&quot; &#125;,</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;列表配置项</span><br><span class="line">const config: Config &#x3D; &#123;</span><br><span class="line">  header: &#123;</span><br><span class="line">    placeholder: &quot;用户名&#x2F;住址&quot;,</span><br><span class="line">    list: [&quot;用户&quot;, &quot;列表&quot;],</span><br><span class="line">  &#125;,</span><br><span class="line">  filters: [</span><br><span class="line">    &#123;</span><br><span class="line">      type: FilterFieldTypeEnum.Select,</span><br><span class="line">      label: &quot;测试字段&quot;,</span><br><span class="line">      field: &quot;test&quot;,</span><br><span class="line">      options: testOptionList,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      type: FilterFieldTypeEnum.TimeRange,</span><br><span class="line">      label: &quot;生日&quot;,</span><br><span class="line">      field: &quot;birthdayTimeRange&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  columns: [</span><br><span class="line">    &#123; field: &quot;id&quot;, title: &quot;ID&quot; &#125;,</span><br><span class="line">    &#123; field: &quot;name&quot;, title: &quot;姓名&quot; &#125;,</span><br><span class="line">    &#123; field: &quot;birthday&quot;, title: &quot;生日&quot; &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      field: &quot;operate&quot;,</span><br><span class="line">      title: &quot;操作&quot;,</span><br><span class="line">      slot: (param) &#x3D;&gt; &lt;Link to&#x3D;&#123;&#96;&#x2F;system&#x2F;user&#x2F;$&#123;param.record.id&#125;&#96;&#125;&gt;详情&lt;&#x2F;Link&gt;,</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  api: userApi,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * 一个基本的列表页面</span><br><span class="line"> * @constructor</span><br><span class="line"> *&#x2F;</span><br><span class="line">const BasicListExample: React.FC&lt;PropsType&gt; &#x3D; () &#x3D;&gt; &#123;</span><br><span class="line">  return &lt;BasicList &#123;...config&#125; &#x2F;&gt;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">export default BasicListExample;</span><br></pre></td></tr></table></figure>
<h3 id="使用自定义过滤器组件"><a href="#使用自定义过滤器组件" class="headerlink" title="使用自定义过滤器组件"></a>使用自定义过滤器组件</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/rxliuli/example/blob/master/basic_list/src/pages/example/CustomFilterListExample.tsx">GitHub 代码示例</a></p>
</blockquote>
<p>事实上，总有各种奇怪的过滤器无法满足，这时候就需要添加一个自定义的过滤器了。<br>例如下面这个过滤器，包含了年龄的值和单位，是不是感觉很奇怪</p>
<p>关键代码配置如下</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> config: Config = &#123;</span><br><span class="line">  filters: [</span><br><span class="line">    &#123;</span><br><span class="line">      type: FilterFieldTypeEnum.Slot,</span><br><span class="line">      label: <span class="string">&quot;年龄&quot;</span>,</span><br><span class="line">      field: <span class="string">&quot;age&quot;</span>,</span><br><span class="line">      children: (</span><br><span class="line">        &lt;Input.Group compact&gt;</span><br><span class="line">          &lt;Form.Item name=&#123;[<span class="string">&quot;age&quot;</span>, <span class="string">&quot;value&quot;</span>]&#125; noStyle&gt;</span><br><span class="line">            &lt;InputNumber style=&#123;&#123; <span class="attr">width</span>: <span class="string">&quot;calc(100% - 64px)&quot;</span> &#125;&#125; /&gt;</span><br><span class="line">          &lt;/Form.Item&gt;</span><br><span class="line">          &lt;Form.Item name=&#123;[<span class="string">&quot;age&quot;</span>, <span class="string">&quot;unit&quot;</span>]&#125; noStyle&gt;</span><br><span class="line">            &lt;Select style=&#123;&#123; <span class="attr">width</span>: <span class="number">64</span> &#125;&#125; options=&#123;ageUnitOptionList&#125; /&gt;</span><br><span class="line">          &lt;/Form.Item&gt;</span><br><span class="line">        &lt;/Input.Group&gt;</span><br><span class="line">      ),</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// 此处是为了添加过滤器的默认值</span></span><br><span class="line">  params: &#123;</span><br><span class="line">    age: &#123;</span><br><span class="line">      unit: <span class="number">0</span>,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h3 id="添加表格的额外操作"><a href="#添加表格的额外操作" class="headerlink" title="添加表格的额外操作"></a>添加表格的额外操作</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/rxliuli/example/blob/master/basic_list/src/pages/example/TableOperationListExample.tsx">GitHub 代码示例</a></p>
</blockquote>
<p>有时候，我们需要添加一个额外的表格操作，例如导出/导入数据/删除选中数据。</p>
<p>关键代码如下</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">handleBatchDelete</span>(<span class="params">&#123;</span></span></span><br><span class="line"><span class="function"><span class="params">  selectedRowKeys,</span></span></span><br><span class="line"><span class="function"><span class="params">  setSelectedRowKeys,</span></span></span><br><span class="line"><span class="function"><span class="params">  searchPage,</span></span></span><br><span class="line"><span class="function"><span class="params">&#125;: ListTableOperateParam</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (selectedRowKeys.length === <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">await</span> userApi.batchDelete(selectedRowKeys)</span><br><span class="line">  setSelectedRowKeys([])</span><br><span class="line">  <span class="keyword">await</span> searchPage()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = useMemo&lt;Config&gt;(</span><br><span class="line">  () =&gt; (&#123;</span><br><span class="line">    tableOperate: <span class="function">(<span class="params">params</span>) =&gt;</span> (</span><br><span class="line">      &lt;Button onClick=&#123;<span class="function">() =&gt;</span> handleBatchDelete(params)&#125;&gt;删除选中&lt;/Button&gt;</span><br><span class="line">    ),</span><br><span class="line">  &#125;),</span><br><span class="line">  [],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h3 id="过滤器的下拉框数据来源是异步的"><a href="#过滤器的下拉框数据来源是异步的" class="headerlink" title="过滤器的下拉框数据来源是异步的"></a>过滤器的下拉框数据来源是异步的</h3><blockquote>
<p><a target="_blank" rel="noopener" href="https://github.com/rxliuli/example/blob/master/basic_list/src/pages/example/AsyncSelectOptionsListExample.tsx">GitHub 代码示例</a></p>
</blockquote>
<p>很多时候，我们的数据来源并不是由前端写死，而是从后台获取的，这就要求我们传入的值是 react 的一个 State 而非一个固定值。</p>
<p>关键代码如下</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> testOptionList = useAsyncMemo([], dictApi.list)</span><br><span class="line"><span class="keyword">const</span> config = useMemo&lt;Config&gt;(</span><br><span class="line">  () =&gt; (&#123;</span><br><span class="line">    filters: [</span><br><span class="line">      &#123;</span><br><span class="line">        type: FilterFieldTypeEnum.Select,</span><br><span class="line">        label: <span class="string">&#x27;测试字段&#x27;</span>,</span><br><span class="line">        field: <span class="string">&#x27;test&#x27;</span>,</span><br><span class="line">        options: testOptionList,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;),</span><br><span class="line">  [testOptionList],</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<h2 id="组件-API"><a href="#组件-API" class="headerlink" title="组件 API"></a>组件 API</h2><h3 id="BasicList"><a href="#BasicList" class="headerlink" title="BasicList"></a>BasicList</h3><p>参考 <em>src/components/common/table/js/BasicListOptions.d.ts</em></p>
<table>
<thead>
<tr>
<th><code>prop</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>header</code></td>
<td><code>BasicList.Header</code></td>
<td>标题栏相关配置</td>
</tr>
<tr>
<td><code>[filters]</code></td>
<td><code>BaseFilterField[]</code></td>
<td>过滤器列表</td>
</tr>
<tr>
<td></td>
<td><code>((params: any, onChange: (params: any) =&gt; void) =&gt; ReactElement)</code></td>
<td></td>
</tr>
<tr>
<td><code>[params]</code></td>
<td><code>Params</code></td>
<td>查询参数</td>
</tr>
<tr>
<td><code>columns</code></td>
<td><code>TableColumn[]</code></td>
<td>列字段列表</td>
</tr>
<tr>
<td><code>api</code></td>
<td><code>BaseListApi</code></td>
<td>api 对象</td>
</tr>
<tr>
<td><code>[tableOptions]</code></td>
<td><code>TableOptions</code></td>
<td>一些其他选项</td>
</tr>
<tr>
<td><code>[tableOperate]</code></td>
<td><code>ListTableOperate</code></td>
<td>一些其他操作</td>
</tr>
</tbody></table>
<h3 id="ListFilter"><a href="#ListFilter" class="headerlink" title="ListFilter"></a>ListFilter</h3><p>| <code>prop</code>           | 类型                 | 说明                     |<br>| —————- | ——————– | ———————— | —————— | ———- |<br>| <code>[initialValue]</code> | <code>any</code>                | 查询参数                 |<br>| <code>filters</code>        | <code>(FilterSelectType   | FilterTimeRangeType      | FilterSlotType)[]</code> | 过滤器列表 |<br>| <code>onChange</code>       | <code>(value: T) =&gt; void</code> | 当过滤器的参数发生改变时 |</p>
<h3 id="ListTable"><a href="#ListTable" class="headerlink" title="ListTable"></a>ListTable</h3><table>
<thead>
<tr>
<th><code>prop</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>columns</code></td>
<td><code>TableColumn[]</code></td>
<td>列字段列表</td>
</tr>
<tr>
<td><code>api</code></td>
<td><code>BaseListApi</code></td>
<td>api 对象</td>
</tr>
<tr>
<td><code>params</code></td>
<td><code>Params</code></td>
<td>查询参数</td>
</tr>
<tr>
<td><code>[tableOptions]</code></td>
<td><code>TableOptions</code></td>
<td>一些其他选项</td>
</tr>
<tr>
<td><code>[tableOperate]</code></td>
<td><code>ListTableOperate</code></td>
<td>一些其他选项</td>
</tr>
</tbody></table>
<h2 id="其他类型定义"><a href="#其他类型定义" class="headerlink" title="其他类型定义"></a>其他类型定义</h2><p>下面是类型定义，所有的类型定义都有对应的 <code>.d.ts</code> 文件，请使用 <code>C-N</code> 搜索 <code>class</code>。</p>
<table>
<thead>
<tr>
<th><code>HeaderNavItem</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>string</code></td>
<td></td>
<td>导航的名字</td>
</tr>
<tr>
<td><code>name</code></td>
<td><code>string</code></td>
<td>导航的名字</td>
</tr>
<tr>
<td><code>[link]</code></td>
<td><code>string</code></td>
<td>如果是 route 的话必须有值</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><code>Header</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>list</code></td>
<td><code>HeaderNavItem[]</code></td>
<td>导航元素列表</td>
</tr>
<tr>
<td><code>placeholder</code></td>
<td><code>string</code></td>
<td>搜索框的提示文本</td>
</tr>
</tbody></table>
<h3 id="过滤器相关"><a href="#过滤器相关" class="headerlink" title="过滤器相关"></a>过滤器相关</h3><table>
<thead>
<tr>
<th><code>FilterFieldTypeEnum</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>Slot</code></td>
<td><code>1</code></td>
<td>自定义 slot</td>
</tr>
<tr>
<td><code>Select</code></td>
<td><code>2</code></td>
<td>普通选择框</td>
</tr>
<tr>
<td><code>TimeRange</code></td>
<td><code>3</code></td>
<td>日期区间选择器</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><code>FilterFieldBase</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>type</code></td>
<td><code>FilterFieldTypeEnum</code></td>
<td>过滤器元素类型</td>
</tr>
<tr>
<td><code>label</code></td>
<td><code>string</code></td>
<td>显示的标题</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><code>FilterSelectType</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>extends</code></td>
<td><code>FilterFieldBase</code></td>
<td>继承基本过滤器配置</td>
</tr>
<tr>
<td><code>field</code></td>
<td><code>string</code></td>
<td>字段名</td>
</tr>
<tr>
<td><code>options</code></td>
<td><code>LabeledValue[]</code></td>
<td>值列表</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><code>FilterTimeRangeType</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>extends</code></td>
<td><code>FilterFieldBase</code></td>
<td>继承基本过滤器配置</td>
</tr>
<tr>
<td><code>field</code></td>
<td><code>string</code></td>
<td>字段名</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><code>FilterSlotType</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>extends</code></td>
<td><code>FilterFieldBase</code></td>
<td>继承基本过滤器配置</td>
</tr>
<tr>
<td><code>field</code></td>
<td><code>string</code></td>
<td>字段名</td>
</tr>
<tr>
<td><code>children</code></td>
<td><code>ReactElement</code></td>
<td><code>Form.Item</code> 的子元素</td>
</tr>
<tr>
<td><code>[computed]</code></td>
<td><code>(res: Record&lt;string, any&gt;, value: any) =&gt; Record&lt;string, any&gt;</code></td>
<td>自定义计算方法</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><code>Params</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>keyword</code></td>
<td><code>string</code></td>
<td>查询关键字</td>
</tr>
<tr>
<td><code>...args</code></td>
<td><code>any[]</code></td>
<td>其他查询参数</td>
</tr>
</tbody></table>
<h3 id="表格相关"><a href="#表格相关" class="headerlink" title="表格相关"></a>表格相关</h3><table>
<thead>
<tr>
<th><code>TableColumn</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>field</code></td>
<td><code>string</code></td>
<td>在数据项中对应的字段名</td>
</tr>
<tr>
<td><code>title</code></td>
<td><code>string</code></td>
<td>列标题</td>
</tr>
<tr>
<td><code>[formatter]</code></td>
<td><code>(v: any, record: any) =&gt; any</code></td>
<td>自定义字段格式化函数</td>
</tr>
<tr>
<td><code>[slot]</code></td>
<td><code>(param: &#123; text: string; record: any; i: number &#125;) =&gt; ReactNode</code></td>
<td>自定义 <code>slot</code></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><code>BaseListApi</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>pageList</code></td>
<td><code>(params: any) =&gt; Promise&lt;PageRes&lt;any&gt;&gt;</code></td>
<td>所有 ListTable 中的 api 对象必须实现该类型</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><code>ListTableOperateParam</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>searchPage</code></td>
<td><code>(page?: PageParam) =&gt; Promise&lt;void&gt;</code></td>
<td>导航元素列表</td>
</tr>
<tr>
<td><code>selectedRowKeys</code></td>
<td><code>string[]</code></td>
<td>当前选中行的主键</td>
</tr>
<tr>
<td><code>setSelectedRowKeys</code></td>
<td><code>(selectedRowKeys: string[]) =&gt; void</code></td>
<td>设置当前选中行的主键</td>
</tr>
<tr>
<td><code>page</code></td>
<td><code>PageData&lt;any&gt;</code></td>
<td>分页数据信息</td>
</tr>
<tr>
<td><code>params</code></td>
<td><code>Params</code></td>
<td>过滤器及搜索参数</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th><code>TableOptions</code></th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>[isSelect]</code></td>
<td><code>boolean</code></td>
<td>是否可选，默认为 false</td>
</tr>
<tr>
<td><code>[rowKey]</code></td>
<td><code>string</code></td>
<td>行的唯一键，默认为 id</td>
</tr>
</tbody></table>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>相比于之前吾辈 <a target="_blank" rel="noopener" href="https://blog.rxliuli.com/p/aa3fd9e1/">vue 的初版 List 封装</a>，嗯，差距非常明显！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2020/12/30/9b07ff8ce6dd4eb08896f6b8191d7181/" data-id="ckmcqox47006m0kuv7yke7x5d" data-title="react 通用列表组件封装" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/" rel="tag">react</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2020/12/30/b95ad81959a440fa9c3f2df0cafd3773/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          使用插件还是油猴脚本
        
      </div>
    </a>
  
  
    <a href="/2020/12/30/386f3414997f4517a4c071a1ec230182/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">近期博客变化</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/" rel="tag">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/electron/" rel="tag">electron</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/" rel="tag">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grid/" rel="tag">grid</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/" rel="tag">java</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/" rel="tag">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/jetbrains/" rel="tag">jetbrains</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/linux/" rel="tag">linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/markdown/" rel="tag">markdown</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/" rel="tag">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sql/" rel="tag">sql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typescript/" rel="tag">typescript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vscode/" rel="tag">vscode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webstorm/" rel="tag">webstorm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/" rel="tag">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%AA%E4%BA%BA/" rel="tag">个人</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%85%AC%E5%8F%B8/" rel="tag">公司</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%91%A8%E6%8A%A5/" rel="tag">周报</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%A3%E5%91%8A/" rel="tag">宣告</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E5%85%B7/" rel="tag">工具</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" rel="tag">工程化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%80%E6%BA%90/" rel="tag">开源</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BC%82%E6%AD%A5/" rel="tag">异步</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%BE%85%E6%9B%B4%E6%96%B0/" rel="tag">待更新</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9D%82%E8%B0%88/" rel="tag">杂谈</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%AE%97%E6%B3%95/" rel="tag">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%8F%E9%AA%8C/" rel="tag">经验</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BB%E4%B9%A6/" rel="tag">读书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AC%E8%BD%BD/" rel="tag">转载</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/css/" style="font-size: 12.14px;">css</a> <a href="/tags/electron/" style="font-size: 15.71px;">electron</a> <a href="/tags/git/" style="font-size: 12.86px;">git</a> <a href="/tags/grid/" style="font-size: 10.71px;">grid</a> <a href="/tags/java/" style="font-size: 19.29px;">java</a> <a href="/tags/javascript/" style="font-size: 20px;">javascript</a> <a href="/tags/jetbrains/" style="font-size: 12.14px;">jetbrains</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/markdown/" style="font-size: 10.71px;">markdown</a> <a href="/tags/react/" style="font-size: 14.29px;">react</a> <a href="/tags/sql/" style="font-size: 14.29px;">sql</a> <a href="/tags/typescript/" style="font-size: 12.14px;">typescript</a> <a href="/tags/vscode/" style="font-size: 12.86px;">vscode</a> <a href="/tags/vue/" style="font-size: 16.43px;">vue</a> <a href="/tags/webstorm/" style="font-size: 10px;">webstorm</a> <a href="/tags/windows/" style="font-size: 17.14px;">windows</a> <a href="/tags/%E4%B8%AA%E4%BA%BA/" style="font-size: 12.86px;">个人</a> <a href="/tags/%E5%85%AC%E5%8F%B8/" style="font-size: 10px;">公司</a> <a href="/tags/%E5%91%A8%E6%8A%A5/" style="font-size: 10px;">周报</a> <a href="/tags/%E5%AE%A3%E5%91%8A/" style="font-size: 10px;">宣告</a> <a href="/tags/%E5%B7%A5%E5%85%B7/" style="font-size: 13.57px;">工具</a> <a href="/tags/%E5%B7%A5%E7%A8%8B%E5%8C%96/" style="font-size: 17.86px;">工程化</a> <a href="/tags/%E5%BC%80%E6%BA%90/" style="font-size: 10px;">开源</a> <a href="/tags/%E5%BC%82%E6%AD%A5/" style="font-size: 15px;">异步</a> <a href="/tags/%E5%BE%85%E6%9B%B4%E6%96%B0/" style="font-size: 10.71px;">待更新</a> <a href="/tags/%E6%9D%82%E8%B0%88/" style="font-size: 18.57px;">杂谈</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 10px;">算法</a> <a href="/tags/%E7%BB%8F%E9%AA%8C/" style="font-size: 11.43px;">经验</a> <a href="/tags/%E8%AF%BB%E4%B9%A6/" style="font-size: 12.14px;">读书</a> <a href="/tags/%E8%BD%AC%E8%BD%BD/" style="font-size: 11.43px;">转载</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/12/">December 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/09/">September 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/03/14/8fb2d58463ae4191ac064a76e15bffbd/">2021 第十周</a>
          </li>
        
          <li>
            <a href="/2021/03/12/7e7131c07c984d928ba3fefa7a9cef06/">读书-[颓废与沉默：透视犬儒文化]</a>
          </li>
        
          <li>
            <a href="/2021/03/02/db74e6e5d2444bc3b6e185a7b338bbf6/">electron 开发经验之谈系列-在渲染、主进程间共享数据</a>
          </li>
        
          <li>
            <a href="/2021/02/27/06cb464179cf45c598208534705aae3c/">2020 吾辈在公司推动的前端技术演进</a>
          </li>
        
          <li>
            <a href="/2021/02/23/cd66150d2b86448590fcc9bb2419c0b2/">实践 lerna monorepo</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>